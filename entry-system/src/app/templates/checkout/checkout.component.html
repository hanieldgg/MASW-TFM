<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Checkout</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" [fullscreen]="true">
    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">Checkout</ion-title>
        </ion-toolbar>
    </ion-header>

    <div id="container">
        <div *ngIf="isLoading" id="loading-wrapper">
            <ion-spinner></ion-spinner>
        </div>

        <div *ngIf="!isLoading">
            <ion-list>
                <ion-item *ngFor="let item of cartItems; let i = index">
                    <ion-label>
                        <h2>{{ item.name }}</h2>
                        <p>Price: {{ item.price | currency }}</p>
                    </ion-label>
                    <ion-button
                        fill="clear"
                        color="danger"
                        (click)="removeItem(i)"
                    >
                        <ion-icon slot="icon-only" name="trash"></ion-icon>
                    </ion-button>
                </ion-item>
            </ion-list>

            <div id="total">
                <h2>Total: {{ totalAmount | currency }}</h2>
            </div>

            <div id="buttons">
                <div class="right">
                    <ion-button (click)="proceedToPayment()">
                        Proceed to Payment
                        <ion-icon slot="end" name="card"></ion-icon>
                    </ion-button>
                </div>
            </div>
        </div>

        <ion-alert
            [isOpen]="isAlertOpen"
            header="Alert"
            subHeader="An error has occurred"
            message="Please fill all required fields to continue."
            [buttons]="alertButtons"
            (didDismiss)="setAlertOpen(false)"
        ></ion-alert>

        <ion-toast
            [isOpen]="isToastOpen"
            message="Cart saved successfully"
            [duration]="3000"
            position="bottom"
            (didDismiss)="setOpen(false)"
        ></ion-toast>
    </div>
</ion-content>
